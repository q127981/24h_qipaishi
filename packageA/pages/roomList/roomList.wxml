<!--pages/roomList/roomList.wxml-->
<view class="tabs">
  <view class="item">
    <van-dropdown-menu active-color="{{mainColor}}">
      <van-dropdown-item value="{{ storeId }}" options="{{ stores }}"  bind:change="storeDropdown" />
  </van-dropdown-menu>
  </view>
  <view class="item">
    <view class="btn red" bindtap="openStoreDoor">å¼€å¤§é—¨</view>
  </view>
</view>
<view class="container">
  <view class="list">
    <view class="item" wx:for="{{doorList}}" wx:key="item">
      <view class="left">
        <view class="info">
          <text class="name">{{item.roomName}}ï¼ˆ{{item.type===1?'å°åŒ…':item.type===2?'ä¸­åŒ…':item.type===3?'å¤§åŒ…':item.type===4?'è±ªåŒ…':'å•†åŠ¡åŒ…'}}ï¼‰</text>
        </view>
        <view class="info">
          <label>é—¨åº—ï¼š</label>
          <text>{{item.storeName}}</text>
        </view>
        <view class="info">
          <label>çŠ¶æ€ï¼š</label>
          <text>{{item.status==1?'ç©ºé—²':item.status==2?'å¾…æ¸…æ´':item.status==3?'ä½¿ç”¨ä¸­':item.status==4?'å·²é¢„çº¦':'ç¦ç”¨'}}</text>
        </view>
        <block wx:if="{{item.status == 2}}">
          <view class="tip color-attention" wx:if="{{item.endTime}}">
             å¾…æ¸…æ´ | {{item.startTime}}å¼€å§‹
          </view>
        </block>
        <block wx:if="{{item.status == 3}}">
          <view class="tip color-attention" wx:if="{{item.endTime}}">
              ä½¿ç”¨ä¸­ | {{item.endTime}}ç»“æŸ
          </view>
        </block>
        <block wx:if="{{item.status == 4}}">
          <view class="tip color-attention" wx:if="{{item.endTime}}">
              å·²é¢„è®¢ | {{item.startTime}}å¼€å§‹
          </view>
        </block>
      </view>
      <block wx:if="{{userinfo.userType!=14||(userinfo.userType==14&&item.clearOpenDoor)}}">
        <view class="right">
          <view class="btn red" bindtap="roomOp" data-room="{{item}}">æ§åˆ¶åŠŸèƒ½</view>
        </view>
      </block>
    </view>
  </view>
  <view class="buttom">- åŠ è½½å®Œæ¯• -</view>
</view>
<!-- æˆ¿é—´æ§åˆ¶å¼¹å‡º -->
<van-dialog use-slot title="æˆ¿é—´æ§åˆ¶" show="{{ showRoomOp }}" confirm-button-text="å…³é—­" bind:confirm="closeRoomOp">
  <view class="dialog">
   <view class="item">
    <view class="name">
      ã€{{roomName}}ã€‘
    </view>
   </view>
    <view class="item">
        <view class="btn red" bindtap="openDoor">å¼€ç”µ</view>
        <view class="btn red" bindtap="closeDoor">å…³ç”µ</view>
        <view class="btn waring" bindtap="testYunlaba">æµ‹è¯•å–‡å­</view>
    </view>
    <view class="item" wx:if="{{userinfo.userType!=14}}">
        <view class="btn waring" bindtap="showModal">ç©ºè°ƒæ§åˆ¶</view>
        <view class="btn waring" bindtap="clearAndFinish">ä¿æ´å®Œæˆ</view>
        <view class="btn red" bindtap="toPlaceOrder">ä»£ä¸‹å•</view>
    </view>
  </view>
</van-dialog>

<view class="ac-control">
  <view class="ac-control__modal {{kongtiaoShow ? 'ac-control__modal--show' : ''}}" bindtap="hideModal">
    <view class="ac-control__modal-content" catchtap="stopPropagation">
      <view class="ac-control__modal-header">
        <text class="ac-control__modal-title">ç©ºè°ƒæ§åˆ¶</text>
        <text class="ac-control__modal-close" bindtap="hideModal">Ã—</text>
      </view>
      <view class="ac-control__modal-body">
        <view class="ac-control__temperature-control">
          <button class="ac-control__control-button" bindtap="adjustTemperature" data-delta="-1" >-</button>
          <view class="ac-control__temperature-display">
                <text class="ac-control__temperature-text">æ¸©åº¦</text>            
          </view>
          <button class="ac-control__control-button" bindtap="adjustTemperature" data-delta="1" >+</button>
        </view>
        <view class="ac-control__fan-control">
          <button class="ac-control__control-button" bindtap="adjustFanSpeed" data-delta="-1" >-</button>
          <view class="ac-control__fan-display">
            <text class="text">é£é‡</text>
            <view class="ac-control__fan-level">
              <view wx:for="{{5}}" wx:key="index" class="ac-control__fan-dot {{fanSpeed >= index + 1 ? 'ac-control__fan-dot--active' : ''}}"></view>
            </view>
          </view>
          <button class="ac-control__control-button" bindtap="adjustFanSpeed" data-delta="1" >+</button>
        </view>
        
        <view class="ac-control__mode-grid">
          <view class="ac-control__mode-button {{mode === 'cool' ? 'ac-control__mode-button--active' : ''}} " bindtap="setMode" data-mode="cool">
            <text class="ac-control__mode-icon">â„ï¸</text>
            <text>åˆ¶å†·</text>
          </view>
          <view class="ac-control__mode-button {{mode === 'heat' ? 'ac-control__mode-button--active' : ''}}" bindtap="setMode" data-mode="heat">
            <text class="ac-control__mode-icon">ğŸ”†</text>
            <text>åˆ¶çƒ­</text>
          </view>
          <view class="ac-control__mode-button {{mode === 'auto' ? 'ac-control__mode-button--active' : ''}}" bindtap="setMode" data-mode="auto">
            <text class="ac-control__mode-icon">ğŸ”„</text>
            <text>è‡ªåŠ¨</text>
          </view>
        </view>
        
        <view class="ac-control__swing-row">
          <view class="ac-control__swing-button {{verticalSwing ? 'ac-control__swing-button--active' : ''}} " bindtap="toggleVerticalSwing">
            <text class="ac-control__mode-icon">â†•ï¸</text>
            <text>ä¸Šä¸‹æ‰«é£</text>
          </view>
          <view class="ac-control__swing-button {{horizontalSwing ? 'ac-control__swing-button--active' : ''}} " bindtap="toggleHorizontalSwing">
            <text class="ac-control__mode-icon">â†”ï¸</text>
            <text>å·¦å³æ‰«é£</text>
          </view>
        </view>
        <view class="btn">
          <button class="ac-control__power-button ac-control__power-button--on" bindtap="togglePowerOn">
          å¼€æœº
          </button>
          <button class="ac-control__power-button ac-control__power-button--off" bindtap="togglePowerOff">
          å…³æœº
          </button>
        </view>
      </view>
    </view>
  </view>
</view>