<view class="page">
  <!-- 顶部输入区域 -->
  <view class="top-card">
    <view class="input-row">
      <view class="input-group compact">
        <view class="label">手机号</view>
        <input 
          class="input" 
          type="number" 
          placeholder="请输入手机号" 
          value="{{phone}}" 
          maxlength="11"
          bindinput="onPhoneInput"
        />
      </view>
      
      <view class="input-group compact">
        <view class="label">查询密码</view>
        <input 
          class="input code-input" 
          type="number" 
          placeholder="4位纯数字密码" 
          value="{{queryCode}}" 
          maxlength="4"
          bindinput="onCodeInput"
        />
      </view>
    </view>
    <view class="tip">查询密码由4位纯数字组成(自行设置)，用于查询申请单记录。忘记或输入错误将无法查询到原申请单</view>
    <view class="btns">
      <view class="btn btn-primary" bind:tap="onAddApply">
        <text class="btn-text">新增申请</text>
      </view>
      <view class="btn btn-secondary" bind:tap="onQueryApply">
        <text class="btn-text">查询申请单</text>
      </view>
    </view>
  </view>


  <!-- 申请信息区域 - 点击按钮后显示 -->
  <view class="info-card" wx:if="{{showInfo}}">
    <view class="card-header">
      <text class="card-title">申请单信息</text>
    </view>
    
    <view class="info-content">
      <view class="info-item">
        <view class="info-label">申请链接</view>
        <view class="info-value">{{applyUrl}}</view>
        <view class="copy-btn" bind:tap="copyText" data-text="{{applyUrl}}">
          <text class="copy-text">复制</text>
        </view>
      </view>
      
      <view class="info-item">
        <view class="info-label">商户编码</view>
        <block wx:if="{{merchantNo}}">
          <view class="info-value">{{merchantNo}}</view>
          <view class="copy-btn" bind:tap="copyText" data-text="{{merchantNo}}">
          <text class="copy-text">复制</text>
        </view>
        </block>
        <block wx:else="">
          <view class="info-value">暂未生成</view>
        </block>
      </view>
      
      <view class="info-item">
        <view class="info-label">申请状态</view>
        <block wx:if="{{remark}}">
          <view class="info-value status-{{statusType}}">{{remark}}</view>
        </block>
       <block wx:else="">
        <view class="info-value status-{{statusType}}">待提交</view>
       </block>
      </view>
    </view>
    
    <view class="steps-box">
      <view class="step-title">操作指引</view>
      <view class="step-item">
        <text class="step-num">1</text>
        <text class="step-text">复制申请链接到浏览器打开，完成账户资料填写</text>
      </view>
      <view class="step-item">
        <text class="step-num">2</text>
        <text class="step-text">资质信息中，《入网完成自动实名认证》选择"是"</text>
      </view>
      <view class="step-item">
        <text class="step-num">3</text>
        <text class="step-text">个体户/企业审核通过后，需复制签约链接进行签约</text>
      </view>
      <view class="step-item">
        <text class="step-num">4</text>
        <text class="step-text">使用微信/支付宝扫实名二维码完成实名认证</text>
      </view>
    </view>
  </view>

    <!-- 二维码区域 - 一直显示 -->
    <view class="qr-card">
    <text class="qr-tip">申请通过后，请使用支付宝和微信，分别扫码实名</text>
    <image src="/img/shimingcode.png" mode="aspectFit" class="qr"/>
  </view>
  
</view>