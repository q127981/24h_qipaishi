<!-- pages/storage/storage.wxml -->
<view class="container">

<!-- æ ‡ç­¾åˆ‡æ¢ -->
<view class="tabs">
  <view class="tab-item {{currentTab === 0 ? 'active' : ''}}" bindtap="switchTab" data-index="0">
    <text>å¾…å–</text>
    <view class="tab-line" wx:if="{{currentTab === 0}}"></view>
  </view>
  <view class="tab-item {{currentTab === 1 ? 'active' : ''}}" bindtap="switchTab" data-index="1">
    <text>å·²å–</text>
    <view class="tab-line" wx:if="{{currentTab === 1}}"></view>
  </view>
  <view class="tab-item {{currentTab === 2 ? 'active' : ''}}" bindtap="switchTab" data-index="2">
    <text>è¿‡æœŸ</text>
    <view class="tab-line" wx:if="{{currentTab === 2}}"></view>
  </view>
</view>

<!-- é—¨åº—ç­›é€‰ -->
<view class="filter-section">
  <view class="filter-item">
    <text class="filter-label">é—¨åº—åç§°</text>
    <input 
      class="filter-input" 
      placeholder="è¯·è¾“å…¥é—¨åº—åç§°" 
      value="{{storeNameFilter}}"
      bindinput="onStoreNameInput"
    />
  </view>
</view>

<!-- å†…å®¹åŒºåŸŸ -->
<scroll-view class="content" scroll-y="true">
  
  <!-- å¾…å–åˆ—è¡¨ -->
  <view wx:if="{{currentTab === 0}}" class="tab-content">
    <view class="store-card" wx:for="{{dataList}}" wx:key="storeId">
      <view class="store-header">
        <text class="store-name">{{item.storeName}}</text>
      </view>
      <view class="goods-list">
        <view class="goods-item" wx:for="{{item.goodsList}}" wx:key="id" wx:for-item="goods">
          <view class="goods-row-first">
            <image class="goods-img" src="/img/shoping.png" mode="aspectFill"></image>
            <text class="goods-name">{{goods.goodsName}}</text>
            <view class="goods-tag remaining">
              <text>å‰©ä½™ {{goods.stockNum}}{{goods.units}}</text>
            </view>
          </view>
          <view class="goods-row-second">
            <text class="time-text">å­˜å…¥: {{goods.createTime}} | åˆ°æœŸ: {{goods.expireTime}}</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- å·²å–åˆ—è¡¨ -->
  <view wx:if="{{currentTab === 1}}" class="tab-content">
    <view class="taken-card" wx:for="{{dataList}}" wx:key="storeId">
      <view class="store-header">
        <text class="store-name">{{item.storeName}}</text>
      </view>
      <view class="goods-list taken">
        <view class="goods-item" wx:for="{{item.goodsList}}" wx:key="id" wx:for-item="goods">
          <view class="goods-row-first">
            <image class="goods-img" src="/img/shoping.png" mode="aspectFill"></image>
            <text class="goods-name">{{goods.goodsName}}</text>
            <view class="goods-tag taken-info">
              <text> {{ goods.stockNum}}{{goods.units}}</text>
            </view>
          </view>
          <view class="goods-row-second">
            <text class="time-text">å–å‡º: {{goods.createTime}} </text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- è¿‡æœŸåˆ—è¡¨ -->
  <view wx:if="{{currentTab === 2}}" class="tab-content">
    <view class="expired-card" wx:for="{{dataList}}" wx:key="storeId">
      <view class="store-header">
        <text class="store-name">{{item.storeName}}</text>
      </view>
      <view class="goods-list expired">
        <view class="goods-item" wx:for="{{item.goodsList}}" wx:key="id" wx:for-item="goods">
          <view class="goods-row-first">
            <image class="goods-img" src="/img/shoping.png" mode="aspectFill"></image>
            <text class="goods-name">{{goods.goodsName}}</text>
            <view class="goods-tag expired-info">
              <text>è¿‡æœŸ {{goods.stockNum}}{{goods.units}}</text>
            </view>
          </view>
          <view class="goods-row-second">
            <text class="time-text">å­˜å…¥: {{goods.createTime}} | åˆ°æœŸ: {{goods.expireTime}}</text>
          </view>
        </view>
      </view>
    </view>
  </view>
<!-- ç©ºçŠ¶æ€ -->
<view class="empty-state" wx:if="{{dataList.length === 0}}">
  <text class="empty-icon">ğŸ“¦</text>
  <text class="empty-text">æš‚æ— æ•°æ®</text>
</view>
</scroll-view>

</view>

